<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Juego de Suspenso</title>
<style>
  body { background: black; color: white; font-family: Arial, sans-serif; padding: 20px; }
  .hidden { display: none; }
  .choices button { background: #333; color: white; padding: 10px; margin: 10px; border: none; cursor: pointer; }
  .choices button:hover { background: #555; }
  .points { margin-top: 10px; }
  .fade-in { animation: fadeIn 1.5s ease-in-out forwards; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .tv-frame { display: flex; justify-content: center; margin-top: 20px; }
  .tv-frame img { max-width: 80%; border: 5px solid #333; box-shadow: 0 0 20px red; display: none; }
</style>
</head>
<body>

<h1>üåßÔ∏è Noche de Tormenta</h1>
<div id="story"></div>
<div class="tv-frame">
  <img id="tvImage" src="A_still_frame_from_an_old_CRT_television_screen_di.png" alt="Criminal en TV">
</div>
<div class="choices hidden" id="choices"></div>
<div class="points">
  ‚ù§Ô∏è Calma: <span id="calma">0</span> |
  üß† Psicol√≥gico: <span id="psico">0</span>
</div>

<audio id="lluvia" src="https://www.soundjay.com/nature/rain-01.mp3" loop></audio>
<audio id="trueno" src="https://www.soundjay.com/nature/thunder-01.mp3"></audio>
<audio id="ladrido" src="https://www.soundjay.com/animal/dog-bark-01.mp3"></audio>
<audio id="rama" src="https://www.soundjay.com/nature/tree-branch-break-01.mp3"></audio>
<audio id="latido" src="https://www.soundjay.com/human/heartbeat-01.mp3"></audio>

<script>
const storyEl = document.getElementById("story");
const choicesEl = document.getElementById("choices");
const calmaEl = document.getElementById("calma");
const psicoEl = document.getElementById("psico");
const tvImage = document.getElementById("tvImage");

let calma = 0;
let psico = 0;

function showText(text, callback) {
  let i = 0;
  storyEl.innerHTML = "";
  const interval = setInterval(() => {
    storyEl.innerHTML += text[i];
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      if (callback) setTimeout(callback, 1000);
    }
  }, 40);
}

function startGame() {
  document.getElementById("lluvia").play();
  showText("Era una noche muy lluviosa... El reloj marcaba las 12:00 AM. Jugando un shooter, las horas pasaron... üïí 3:33 AM.", () => {
    document.getElementById("trueno").play();
    showText("üì∫ Una televisi√≥n antigua se enciende... '√öltima hora: un criminal muy peligroso ha escapado y est√° cerca de La Cruz...'", () => {
      tvImage.style.display = "block"; // Mostrar imagen del criminal
      setTimeout(() => { tvImage.style.display = "none"; }, 4000); // Ocultar despu√©s de 4s
      showText("üêï Spyke empieza a ladrar fuerte tras un trueno.", () => {
        document.getElementById("ladrido").play();
        showText("El personaje dice: 'Spyke, ¬°c√°llate!' La tormenta se intensifica... üå¨Ô∏èüå©Ô∏è", () => {
          document.getElementById("rama").play();
          showChoices();
        });
      });
    });
  });
}

function showChoices() {
  choicesEl.classList.remove("hidden");
  choicesEl.innerHTML = `
    <button onclick="choose('A')">üÖ∞Ô∏è Asomarse por la ventana</button>
    <button onclick="choose('B')">üÖ±Ô∏è Ignorar ruido y calmar a Spyke</button>
  `;
}

function choose(option) {
  choicesEl.classList.add("hidden");
  document.getElementById("latido").play();
  if (option === "A") {
    calma++;
    calmaEl.textContent = calma;
    showText("Te acercas lentamente a la ventana... Suspenso en el aire... Solo una rama ca√≠da... pero jurar√≠as haber visto una sombra moverse... ‚ù§Ô∏è +1");
  } else {
    psico++;
    psicoEl.textContent = psico;
    showText("Ignoras el ruido y acaricias a Spyke... poco a poco deja de ladrar. üß† +1");
  }
}

startGame();
</script>

</body>
</html>
